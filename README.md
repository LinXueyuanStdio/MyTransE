# MyTransE

目标：复现 TransE 并做属性消融实验

## 说明

python3.7
torch                  1.6.0+cu101
tensorboard            2.2.2
tensorflow-gpu         2.2.0

- main.py 是参考 RotatE 的 TransE 实现，仅在测试时用到对齐数据。
- main2.py 是我根据TransE原始论文另一个实现，用于验证模型有效性。
- main3.py 是在 main.py 的基础上，将对齐数据划分80%用于初始化，20%用于测试。
  - 初始化：对于对齐的实体 (a,b)，先使用正态分布初始化所有实体的嵌入，再用 b 的嵌入覆盖 a 的嵌入，使得实体在初始状态时共享相同的嵌入。
- main4.py 是在 main3.py 的基础上，对数据集做了数据增强。
  - 数据增强：对于训练集的对齐实体 (a,b)，原属性三元组(a,attr,value)，增加三元组(b,attr,value)。

## 实验结果

具体训练结果在日志文件中 `main_log.txt` 和 `main3_log.txt`。
- `main_log.txt`：使用属性三元组训练模型，将对齐数据用于测试。
- `main3_log.txt`：使用对齐数据80%用于初始化，20%用于测试；使用属性三元组训练模型。训练过程没有用到对齐数据。

属性消融实验，以 fr_en 为例

- 未使用对齐数据
  ```
  For each left:
  Hits@1: 0.01%
  Hits@10: 0.05%
  Hits@50: 0.32%
  Hits@100: 0.61%
  For each right:
  Hits@1: 0.00%
  Hits@10: 0.10%
  Hits@50: 0.35%
  Hits@100: 0.68%
  ```
- 使用对齐数据80%用于训练，20%用于测试
  ```
  For each left:
  Hits@1: 0.30%
  Hits@10: 1.77%
  Hits@50: 6.20%
  Hits@100: 10.47%
  For each right:
  Hits@1: 0.13%
  Hits@10: 2.20%
  Hits@50: 7.84%
  Hits@100: 11.70%
  ```
  
## 手抄
```
nohup python3 -u t.py > t.log 2>&1 &
```
t.py输出到t.log，和当前命令行进程无关，下次登陆还是在执行的


\begin{table*}
\caption{Experiment Result Table}
\label{tbl3}
\begin{tabular}{c|r|r|r|r|r|r}
\toprule
& \multicolumn{3}{c|}{ZH-EN} & \multicolumn{3}{c}{EN-ZH} \\
\hline
& Hits@1 & Hits@10 & Hits@50 & Hits@1 & Hits@10 & Hits@50\\
\hline

TransE&6.30&25.70&49.46&6.30&24.98&48.11\\
MTransE&30.83&61.41&79.12&24.78&52.42&70.45\\
JAPE&41.18&74.46&88.9&40.15&71.05&86.18\\
GCN&41.25&74.38&86.23&36.49&69.94&82.45\\
INGA&50.45&79.42&89.79&49.36&76.05&86.38\\
\hline
Our.SE&39.23&70.13&80.48&36.72&66.96&77.74\\
Our.AE&&&&&&\\
Our.CS&60.38&89.04&96.19&59.54&86.15&92.69\\
Our.WCS(0.2:0.8)&56.82&82.59&89.91&55.92&82.22&89.36\\
Our.WCS(0.5:0.5)&56.07&82.31&87.99&55.35&81.53&88.56\\
Our.WCS(0.8:0.2)&54.45&80.28&85.75&53.48&78.83&84.18\\
Our.IS&62.36&90.69&97.24&61.03&88.91&95.97\\
\bottomrule

& \multicolumn{3}{c|}{JA-EN} & \multicolumn{3}{c}{EN-JA} \\
\hline
& Hits@1 & Hits@10 & Hits@50 & Hits@1 & Hits@10 & Hits@50\\
\hline
TransE&6.00&22.94&44.92&6.10&22.54&44.52\\
MTransE&27.86&57.45&75.94&23.72&49.92&67.93\\
JAPE&36.25&68.5&85.35&38.37&67.27&82.65\\
GCN&39.91&74.46&86.10&38.42&71.81&83.72\\
INGA&51.46&79.46&88.25&51.05&77.04&86.27\\
\hline
Our.SE&39.63&75.85&86.21&38.26&73.24&84.66\\
Our.AE&&&&&&\\
Our.CS&59.56&87.41&93.93&58.43&83.87&90.74\\
Our.WCS(0.2:0.8)&56.14&81.39&87.18&55.17&78.30&85.05\\
Our.WCS(0.5:0.5)&55.37&81.62&88.22&54.77&78.85&85.86\\
Our.WCS(0.8:0.2)&54.76&80.57&86.10&54.30&77.30&83.06\\
Our.IS&61.33&90.14&96.75&60.31&85.94&93.50\\
\bottomrule

& \multicolumn{3}{c|}{FR-EN} & \multicolumn{3}{c}{EN-FR} \\
\hline
& Hits@1 & Hits@10 & Hits@50 & Hits@1 & Hits@10 & Hits@50\\
\hline
TransE&8.37&27.33&49.88&7.85&26.18&47.53\\
MTransE&24.41&55.55&74.41&21.26&50.6&69.93\\
JAPE&32.39&66.68&83.19&32.97&65.91&82.38\\
GCN&37.29&74.49&86.73&36.77&73.06&86.39\\
INGA&50.45&79.42&87.79&49.36&76.05&86.48\\
\hline
Our.SE&40.50&73.26&82.90&38.08&69.15&78.99\\
Our.AE&&&&&&\\
Our.CS&58.77&86.73&94.08&57.56&83.14&89.59\\
Our.WCS(0.2:0.8)&56.27&82.92&88.70&55.70&81.23&88.48\\
Our.WCS(0.5:0.5)&55.98&81.17&87.69&55.14&79.64&85.83\\
Our.WCS(0.8:0.2)&55.28&80.10&85.69&54.51&79.88&85.45\\
Our.IS&60.45&87.55&94.11&59.69&86.40&92.79\\
\bottomrule
\end{tabular}
\end{table*}
